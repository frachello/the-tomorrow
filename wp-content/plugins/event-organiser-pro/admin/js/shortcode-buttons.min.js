/*! event-organiser-pro 1.8.1 2014-08-11 22:40 */
var eventorganiser=eventorganiser||{};eventorganiser.versionCompare=function(a,b){if(typeof a+typeof b!="stringstring")return!1;for(var c=a.split("."),d=b.split("."),e=0,f=Math.max(c.length,d.length);f>e;e++){if(c[e]&&!d[e]&&parseInt(c[e],10)>0||parseInt(c[e],10)>parseInt(d[e],10))return 1;if(d[e]&&!c[e]&&parseInt(d[e],10)>0||parseInt(c[e],10)<parseInt(d[e],10))return-1}return 0},jQuery(document).ready(function(a){function b(b){var f="";if(0===b)f="[eo_events"+c(b)+e(b),""!==a("#eo-shortcode-tab-0 .event-start-after").val()&&(f+=' event_start_after="'+a("#eo-shortcode-tab-0 .event-start-after").val()+'"'),""!==a("#eo-shortcode-tab-0 .event-end-after").val()&&(f+=' event_end_after="'+a("#eo-shortcode-tab-0 .event-end-after").val()+'"'),f+="]";else if(1==b){if(f="[eo_fullcalendar"+c(b)+e(b)+d(b),""!==a("#eo-shortcode-tab-1 .event-shortcode-calendar-view:checked").val()){var g=a.trim(a("#eo-shortcode-tab-1 .event-shortcode-calendar-view:checked").val());f+=' defaultView="'+g+'"'}if(""!==a("#eo-shortcode-tab-1 .event-shortcode-time-format").val()){var h=a.trim(a("#eo-shortcode-tab-1 .event-shortcode-time-format").val());f+=' timeFormat="'+h+'"'}a("#eo-shortcode-tab-1 .event-shortcode-bookee").attr("checked")&&(f+=' users_events="true"'),f+="]"}else if(2==b){if(f="[eo_venue_map"+c(b)+d(b),""!==a("#eo-shortcode-tab-2 .event-shortcode-map-height").val()){var i=a.trim(a("#eo-shortcode-tab-2 .event-shortcode-map-height").val());f+=' height="'+i+'"'}if(""!==a("#eo-shortcode-tab-2 .event-shortcode-map-width").val()){var j=a.trim(a("#eo-shortcode-tab-2 .event-shortcode-map-width").val());f+=' width="'+j+'"'}f+="]"}else{f="[event_search";for(var k=[],l=["event_category","event_venue","city","state","date","country"],m=0;m<l.length;m++){var n=l[m];a("#eo-shortcode-tab-"+b+" .event-search-filter-"+n).attr("checked")&&k.push(n)}k!=[]&&(f+=' filters="'+k.join(",")+'"'),f+="]"}return f}function c(b){if(""!==a("#eo-shortcode-tab-"+b+" .event-shortcode-venue-selection").val()){var c=a.trim(a("#eo-shortcode-tab-"+b+" .event-shortcode-venue-selection").val());return c=c.replace(/^[,\s]+|[,\s]+$/g,"").replace(/,[,\s]*,/g,","),' event_venue="'+c+'"'}return""}function d(b){return a("#eo-shortcode-tab-"+b+" .event-shortcode-tooltip").attr("checked")?' tooltip="true"':' tooltip="false"'}function e(b){if(""!==a("#eo-shortcode-tab-"+b+" .event-shortcode-cat-selection").val()){var c=a.trim(a("#eo-shortcode-tab-"+b+" .event-shortcode-cat-selection").val());return c=c.replace(/^[,\s]+|[,\s]+$/g,"").replace(/,[,\s]*,/g,","),' event_category="'+c+'"'}return""}function f(a){return a.split(/,\s*/)}function g(a){return f(a).pop()}a("#eo-shortcode-button-dialog").dialog({height:450,width:550,modal:!0,dialogClass:"eo-shortcode-button-dialog",closeOnEscape:!0,draggable:!1,resizable:!1,autoOpen:!1,open:function(){a(this).find(".ui-dialog-titlebar-close").blur(),a("#eo-shortcode-tabs ul.ui-tabs-nav li").blur()},buttons:{"Create shortcode":function(){var c=a.ui?a.ui.version||0:-1,d=eventorganiser.versionCompare(c,"1.9")>=0?"active":"selected",e=b(a("#eo-shortcode-tabs").tabs("option",d));tinymce.execCommand("mceInsertContent",!1,e),a(this).dialog("close")},Cancel:function(){a(this).dialog("close")}}}),tinymce.create("tinymce.plugins.buttonPlugin",{init:function(b,c){b.addCommand("mcebutton",function(){a("#eo-shortcode-button-dialog").dialog("open")}),b.addButton("eo_button",{title:"Event Organiser ShortCodes",cmd:"mcebutton",icon:"eo-calendar",image:eventorganiser.versionCompare(eventorganiser.wp_version,"3.8")>=0?!1:c+"/img/eoicon-20.png"})}}),tinymce.PluginManager.add("eo_button",tinymce.plugins.buttonPlugin),a("#eo-shortcode-button-dialog").parent().find(".ui-dialog-titlebar").remove(),a("#eo-shortcode-tabs").tabs(),a("#eo-shortcode-tabs ul.ui-tabs-nav li").css("top","2px"),a("#eo-shortcode-tabs ul.ui-tabs-nav li a").css("outline","none");var h={delay:0,source:function(b,c){c(a.ui.autocomplete.filter(this.options.values,g(b.term)))},focus:function(){return!1},select:function(a,b){var c=f(this.value);return c.pop(),c.push(b.item.value),c.push(""),this.value=c.join(", "),!1}};h.values=EOPro.venue,h.action="eo-search-venue",a(".event-shortcode-venue-selection").autocomplete(h),h.values=EOPro.category,h.action="eo-search-category",a(".event-shortcode-cat-selection").autocomplete(h)});